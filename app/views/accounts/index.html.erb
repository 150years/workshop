<h1>Chart of Accounts (with Balance)</h1>

<table>
  <thead>
    <tr>
      <th>Account</th>
      <th>Type</th>
      <th>Debit</th>
      <th>Credit</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody>
    <% @accounts.each do |account| %>
      <% debit = account.postings.debit.sum(:amount) %>
      <% credit = account.postings.credit.sum(:amount) %>
      <% balance = debit - credit %>

      <tr>
        <td><%= account.name %></td>
        <td><%= account.kind %></td>
        <td><%= number_to_currency(debit) %></td>
        <td><%= number_to_currency(credit) %></td>
        <td><%= number_to_currency(balance) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
