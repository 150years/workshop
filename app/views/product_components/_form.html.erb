<%= form_with(model: [ @product, product_component ]) do |form| %>
  <% if product_component.errors.any? %>
    <div class="alert alert--negative flex flex-col gap-half mbe-4" role="alert">
      <h2 class="font-medium leading-none"><%= pluralize(product_component.errors.count, "error") %> prohibited this product_component from being saved:</h2>
      <ul class="text-sm mis-3" style="list-style: disc">
        <% product_component.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="flex flex-col gap-half mbe-4">
    <%= form.label :component_id, class: "text-sm font-medium leading-none" %>
    <%= form.select :component_id,
        options_from_collection_for_select(Component.all, :id, ->(c) { "#{c.code} - #{c.name}" }, product_component.component_id),
        { include_blank: "Select component..." },
        { data: { controller: "combobox" } } %>
  </div>

  <div class="flex flex-col gap-half mbe-4">
    <%= form.label :quantity, class: "text-sm font-medium leading-none" %>
    <%= form.number_field :quantity, class: "input" %>
  </div>
  <div class="inline-flex items-center mbs-2 mie-1">
    <%= button_tag tag.span(product_component.persisted? ? "Update Product component" : "Create Product component"), class: "btn btn--primary btn--loading" %>
  </div>
<% end %>
